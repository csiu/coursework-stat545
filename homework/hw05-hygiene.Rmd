---
title: 'hw05: factor & figure management; repo hygine'
author: "csiu"
date: "October 26, 2015"
output: 
    html_document:
        keep_md: yes
---
```{r include=FALSE}
knitr::opts_chunk$set(fig.path='figure/hw05-')
options(knitr.table.format = 'markdown')
```

- [link to homework](http://stat545-ubc.github.io/hw05_factor-figure-boss-repo-hygiene.html)

```{r}
library(gapminder)
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(rworldmap))
library(classInt)
library(viridis)
```

## Factor management
## Visualization design
## Writing figures to file
## Clean up your repo
This is convienently DONE! 

In the first week of lecture (which seems like just yesterday but not and thus is frightening how time flies), Jenny showed us a nice and organized repo where links to homework and classnotes where listed -- in a table of contents -- in the top level README file. I thought this was useful and so I have been adhering to this standard since ... i.e. after every classnote/homework file, I've been listing the new file in my [README](https://github.com/STAT545-UBC/celia_siu/blob/master/README.md) file so that my repo remains clean.

In addition, to ignore `*html` and other irrelevant files, I've been ignoring them in git using the [.gitignore](https://github.com/STAT545-UBC/celia_siu/blob/master/.gitignore) file.

## But I want to do more!
According to Tamara, for noncontiguous small regions, we can see only 6-12 colors (including background color, lines, highlights).
```{r rworldmap-lifeExp2007, fig.width=12, fig.height=6.5, warning=FALSE, results='hide'}
## REFERENCE: https://journal.r-project.org/archive/2011-1/RJournal_2011-1_South.pdf

gdat <- gapminder %>% 
  filter(year==2007)

# gdat %>% 
#   arrange(desc(lifeExp)) %>% 
#   knitr::kable()

numCats <- 7
category <- "lifeExp"

sPDF <- joinCountryData2Map(gdat,
                            joinCode="NAME",
                            nameJoinColumn="country",
                            mapResolution="li",
                            verbose=TRUE)

#getting class intervals
classInt <- classIntervals(sPDF[[category]],
                           n=numCats, style = "jenks")
catMethod <- classInt[["brks"]]

#getting colours
colourPalette <- magma(numCats)

#plot map
#mapDevice() #create world map shaped window
mapParams <- mapCountryData(sPDF,
                            nameColumnToPlot=category,
                            numCats=numCats,
                            catMethod=catMethod,
                            colourPalette=colourPalette,
                            addLegend=FALSE,
                            mapTitle=sprintf('%s in 2007', category)
                            )

#adding legend
do.call(addMapLegend,
        c(mapParams,
          legendLabels="all",
          legendWidth=1,
          legendIntervals="data",
          legendMar = 2))
```

```{r include=FALSE}
#setdiff(gdat$country, sPDF@data$NAME)
"Bahrain" %in% sPDF@data$NAME
"BHR" %in% sPDF@data$ISO3

"Singapore" %in% sPDF@data$NAME
"SGP" %in% sPDF@data$ISO3
```

## Report your progress
Here is a list of what I learned in STAT545 that I did not know/realized previously:

- RStudio/Rproject/Git setup is cool, useful, and powerful
- RPubs is a way to share RScripts with the public (but I remain skeptical in using it)
- `dplyr` -- where have you been all my life? -- is a necessity in manipulating data (especially the `%>%` pipe operator)
- `tidyr` is really, really convienent in reshaping data
- `ggplot(...) + stat_summary(...) ...` to add something such as min/max on the fly
- Must try the palettes `viridis` package, it is mouth watering
- `cowplot` (despite the strange name) is for plotting multiple plots on a page